# The Joy of React - Module 6 - Full Stack React

- [Course Outline Notes](../course-notes.md)

## Intro to Next.js

Next.js, known as Next, is a popular full stack React meta-framework, as of mid-2023. And the only framework to take advantage of React's new full stack model, including React Server Components (RSC).

ðŸ“” Two different Next js

- Important to know about Next is that it has changed dramatically this year.
- In May, 2023, Next released 'v13.4', which is the official stable release of the 'App Router'.
- A complete re-write of Next.js, done to integrate all teh new React features like RSC.

How can you tell is something is out of date, using an older version?

- A directory structure that involves `/pages` directory.
- Methods named `getServerSideProps` and `getStaticProps`
- Files named `_app.js` and `_document.js`
- API Routes

### Hello Next

Running a local Next server, and the files required. Have standard 'package.json' that holds your dependencies and your npm commands for building.

- In the 'src' folder, this holds are our source code. And inside that, we have our 'app' directory. `src > app`.
- The `app` directory is new, and this is new for Next 13, and this is the home for all of our routes.

```CODE
package.json
--src
    --app
```

- Within the app directory, have a style sheet, with some default styles, 'styles.css'
- And then we have two separate components.
  - Inside of 'page.js', a `Home` component.
  - And a `RootLayout` component inside of 'layout.js'
- ðŸ¤” Next uses a **file based routing system**, ðŸ“£ which means I have to name my file, 'page.js' if you want it to be publicly viewable ðŸ“£.
- When you put a 'page.js' file right inside the 'app' directory, not nested inside any sub-directories, **this becomes the component that is rendered on the homepage**. Your root directory 'localhost:3000'.

- In Next.js, pages cannot be used on their own, they have to use a layout.
- Think of layouts as the wrapper around our pages. Multiple pages will share the same layout.

- The difference here, in `create react app`, it would generate an `index.html` document. And we used `<div id="root"></div>` to place our React app.

- In Next, it's totally different, Next renders the entire HTML document and there are no HTML files anywhere in the project.
- This is all generated by the `app/layout.js` file.
- Layout forms the shell, 'html' and 'body' tags, then use `{children}` prop to pass through the page, essentially a slot.

```JAVASCRIPT
// layout.js
import './styles.css';

function RootLayout({ children }) {
    return (
        <html lang="eng">
          <body>
            {children}
            <footer>Copyright 2000</footer>
          </body>
        </html>
    )
}

export default RootLayout;
```

- Suppose you want to have a new route, an about page.
- Create a new folder in the app directory, `app/about` and add a new file `page.js`.

```JAVASCRIPT
// app/about/page.js
import React from 'react';

function AboutPage() {
    return (
        <p>About this site</p>
    )
}

export default AboutPage;
```

- Now, you can view the site, `localhost:3000/about` and it will show your about page.
- The route matches a differ page, `app/about/page.js`, but they both share the same layout.
- ðŸ«¢ And now, you see the same footer from the `RootLayout`

- This opens up all kinds of possibilities, you can have dynamic route segments, you can decide which layout you want to use for each page, nested layouts etc.

- The Next.js documentation has more detailed descriptions.

- Server Components, in Next.js, all components are **server components by default**. Which means you cannot do things like, `useEffects` or `state`. You get an error, only works in Client Components.
- If you want to use any of those, you have to add the directive, `use client` to the top of your component.

```JAVASCRIPT
// app/about/page.js
// add the use client directive 
'use client'
import React from 'react';

function AboutPage() {
    React.useEffect(() => {
        console.log('about page here');
    });
    return (
        <p>About this site</p>
    )
}

export default AboutPage;
```
